{% extends 'base.html' %}
{% block title %}Dashboard - BetCare{% endblock %}
{% block content %}
<h2>Dashboard</h2>
<p>Total gasto: R$ {{ '%.2f' % total }}</p>

{% if config.DEBUG %}
<form method="post" action="{{ url_for('main.clear_db') }}" onsubmit="return confirm('Tem certeza que deseja limpar o banco?');">
  <button type="submit" class="contrast">Limpar banco (teste)</button>
</form>
{% endif %}

<h3>Registrar novo evento</h3>
<form method="post" action="{{ url_for('main.add_event') }}">
  <label>
    Valor (R$)
    <input type="number" name="amount" step="0.01" min="0" required>
  </label>
  <label>
    Observações
    <input type="text" name="notes" placeholder="Ex: aposta esportiva">
  </label>
  <button type="submit">Salvar</button>
</form>

<h3>Histórico</h3>
<table>
  <thead>
    <tr>
      <th>Data</th>
      <th>Valor</th>
      <th>Observações</th>
    </tr>
  </thead>
  <tbody>
    {% for e in events %}
    <tr>
      <td>{{ e.created_at.strftime('%d/%m/%Y %H:%M') }}</td>
      <td>R$ {{ '%.2f' % e.amount }}</td>
      <td>{{ e.notes or '-' }}</td>
    </tr>
    {% else %}
    <tr><td colspan="3">Sem registros ainda.</td></tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
